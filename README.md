# LOAN QUOTE API

This project contains the API for 5Percento project

# Requirements 

<ol>
<li><h2>Install Tomcat 8.5.x</h2></li>
<p>Download Tomcat from the official web site</p>
<p>After you installed Tomcat on your machine you have to add a new user who can access the tomcat web interface (manager-gui and admin-gui). 
Define the user in the conf/tomcat-users.xml file as shown below. Be sure you change the username and password to something more secure:</p>
<pre>
<code>
&lt;tomcat-users/&gt;
   &lt;role rolename="admin-gui"/&gt;
   &lt;role rolename="manager-gui"/&gt;
   &lt;user username="admin" password="admin_password" roles="admin-gui,manager-gui"/&gt;
&lt;/tomcat-users&gt;
</code>
</pre>
<p>If you need to access the web interface from anywhere open the files webapps/manager/META-INF/context.xml webapps/host-manager/META-INF/context.xml and comment the following lines :</p>
<pre>
<code>
&lt;Context antiResourceLocking="false" privileged="true" &gt;
&lt;!--
  &lt;Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" /&gt;
--&gt;
&lt;/Context&gt;</code></pre>

# Configuration development environment

<p>To run the LOAN QUOTE API application under Tomcat follow the following instructions</p>
<ol>
<li>Build project LOAN QUOTE API</li>
<p>Go to your LOAN QUOTE API root folder and build it using the correct mvn profile (development or local)</p>
<code>mvn clean package -Ddevelopment</code><br>
<code>mvn clean package -Dlocal </code>
<p><img src="src/main/resources/setupEnv/3_build_BE.png" width="250" height="160"/></p>
<li>Copy the WAR generated by the build to Tomcat</li>
<p>Go to LOAN QUOTE API target folder and copy the <b>WAR</b> file to the <b>root</b> folder of your tomcat installation</p>
<p><img src="src/main/resources/setupEnv/4_move_BE.png" width="300" height="150"/></p>
<p>Update the tomcat/conf/server.xml file adding the following rows into the localhost host definition:</p>
<pre>
<code>
&lt;Context path="/rso/api" docBase="../loan-quote-api-0.0.1-SNAPSHOT.war" debug="0" reloadable="true" /&gt;
</code>
</pre>
<li>Run Tomcat</li>
<p>Go to Tomcat's <b>bin</b> folder and run the command <code>catalina.bat start</code></p>
<p><img src="src/main/resources/setupEnv/5_run_tomcat.png" width="800"/></p>
<li>[Alternative to 2 and 3] Run the application from IDE</li>
<p>Before to run the application you have to set the following JVM properties</p>
<code>-Dspring.profiles.active=development</code><p>or</p>
<code>-Dspring.profiles.active=local</code>
<li>Verify endpoint</li>
<p>To check that everything is running fine, open the URL <code>http://localhost:8080/actuator/health</code></p>
</ol>


